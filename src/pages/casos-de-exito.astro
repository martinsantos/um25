---
import Layout from '../layouts/Layout.astro';
import { getCasosExito } from '../lib/directus'; // Asegúrate de que esta función esté definida en directus.ts

// Obtener los casos de éxito desde Directus
const response = await fetch('http://localhost:8055/items/casos_de_exito');
const { data: casosExito } = await response.json();
---

<Layout title="Casos de Éxito">
	<main class="container mx-auto px-4 py-8">
		<h1 class="text-4xl font-bold text-center mb-12">Nuestros Casos de Éxito</h1>
		
		<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
			{casosExito.map(caso => (
				<div class="bg-white p-6 rounded-lg shadow-lg">
					<h2 class="text-2xl font-semibold mb-4">{caso.Título}</h2> <!-- Usar 'Título' en lugar de 'titulo' -->
					{caso.Imagen && <img src={`http://localhost:8055/assets/${caso.Imagen}`} alt={caso.Título} class="w-full h-48 object-cover mb-4 rounded" />} <!-- Usar 'Imagen' en lugar de 'imagen' -->
					<p class="text-gray-700 mb-4">{caso.Descripción}</p> <!-- Usar 'Descripción' en lugar de 'descripcion' -->
					{caso['Links-qhkc-b'] && (
						<a href={caso['Links-qhkc-b']} class="text-blue-600 hover:text-blue-800">Más información →</a>
					)}
				</div>
			))}
		</div>
		
		<div class="mt-12 text-center">
			<a href="/contact" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
				Solicitar Información
			</a>
		</div>
	</main>
</Layout>